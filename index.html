<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Daily Roulette · Teamübersicht</title>
  <style>
    :root{
      --bg: hsl(240, 22%, 10%);
      --main: hsl(240, 21%, 21%);
      --card: #fff;
      --text: hsl(220 20% 20%);
      --muted: hsl(220 10% 45%);
      --accent: #4f46e5;
      --accent-light: hsl(210 95% 92%);
      --accent-dark: #6366f1;
      --accent-ink: white;
      --radius: 10px;
      --shadow: 0 6px 20px hsl(220 40% 2% / .08);
      --speed: 180ms;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin: 0; font: 16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial;
      color: var(--text); background: linear-gradient(160deg, var(--bg), hsl(240, 22%, 20%));
      display: grid; place-items: center; padding: 24px;
    }

    .app{ width: min(100%, 480px); background: var(--card); border-radius: var(--radius); box-shadow: var(--shadow); overflow: hidden; }
    header{ display: flex; align-items: center; justify-content: space-between; padding: 18px 20px; border-bottom: 1px solid hsl(210 20% 90%); background: hsl(240, 21%, 70%); position: sticky; top: 0; z-index: 2;}
    header h1{ font-size: 18px; margin: 0; letter-spacing: .2px; color: hsl(210 90% 100%); }

    .btn{ appearance: none; border: 0; background: var(--accent); color: var(--accent-ink); padding: 8px 14px; border-radius: 6px; cursor: pointer; font-weight: 600; letter-spacing: .2px; transition: background var(--speed), transform var(--speed); }
    .btn:hover{ background: var(--accent-dark); transform: translateY(-1px); }

     main{  background: linear-gradient(80deg, var(--main), hsl(240, 21%, 30%)); }

    .list{ padding: 20px; display: flex; flex-direction: column; gap: 12px; }

    .person{ display: flex; align-items: center; gap: 14px; padding: 6px; border-radius: var(--radius); background: var(--accent-light); box-shadow: inset 0 0 0 1px hsl(210 20% 85%); transition: background var(--speed), box-shadow var(--speed), transform var(--speed), color var(--speed); cursor: pointer; }
    .person:hover{ box-shadow: 0 0 0 2px hsl(210 85% 65% / .35); transform: translateY(-1px); }

    .person.present{ background: var(--accent-dark); color: var(--accent-ink); box-shadow: 0 4px 10px hsl(210 65% 35% / .25); }
    .person.present .avatar{ background: var(--accent-ink); color: var(--accent-dark); }
    .person.present .name,
    .person.present .role { color: var(--accent-ink); }

    .avatar{ width: 42px; height: 42px; border-radius: 50%; background: hsl(210 30% 88%); display: flex; align-items: center; justify-content: center; font-weight: 700; color: var(--text); transition: background var(--speed), color var(--speed); }

    .info{ display: flex; flex-direction: column; }
    .name{ font-weight: 600; transition: color var(--speed); }
    .role{ font-size: 13px; color: var(--muted); transition: color var(--speed); }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Daily Roulette</h1>
      <div style="display:flex; gap:8px;">
        <button class="btn" id="shuffleBtn">Würfeln</button>
        <button class="btn" id="resetBtn">Zurücksetzen</button>
      </div>
    </header>

    <main>
      <div class="list" id="teamList" role="list" aria-label="Teamliste"></div>
    </main>
  </div>

  <script>
    const TEAM = [
      { short: "SWA", name: "Sven",  roleShort: "SM",  role: "Scrum Master" },
      { short: "JHE", name: "Jonas", roleShort: "DEV", role: "Entwickler" },
      { short: "RST", name: "Rico",  roleShort: "DEV", role: "Entwickler" },
      { short: "DGI", name: "Daniel", roleShort: "DEV", role: "Entwickler" },
      { short: "SHE", name: "Sebastian H",   roleShort: "PO",  role: "Product Owner" },
      { short: "FDO", name: "Franzi", roleShort: "QA",  role: "Qualitätssicherung" },
      { short: "DVO", name: "Dennis",   roleShort: "PM",  role: "Product Manager" },
      { short: "RJO", name: "Robert",   roleShort: "PM",  role: "Product Manager" },
      { short: "SJU", name: "Sebastian J",   roleShort: "PM",  role: "Product Manager" },
      { short: "MED", name: "Steffi",   roleShort: "SUP",  role: "Support" },
      { short: "JBR", name: "Jana",   roleShort: "SUP",  role: "Support" }
    ];

    const escapeHtml = (str) => String(str)
      .replaceAll('&', '&amp;')
      .replaceAll('<', '&lt;')
      .replaceAll('>', '&gt;')
      .replaceAll('"', '&quot;')
      .replaceAll("'", '&#039;');

    function renderTeam(listEl, team){
      listEl.innerHTML = '';
      team.forEach((u) => {
        const short = u.short?.trim()?.toUpperCase() ?? '';
        const name  = escapeHtml(u.name ?? 'Unbekannt');
        const role  = escapeHtml(u.roleShort ?? u.role ?? '');

        const div = document.createElement('div');
        div.className = 'person present'; // Standardmäßig ausgewählt
        div.dataset.short = short;
        div.innerHTML = `
          <div class="avatar">${escapeHtml(short)}</div>
          <div class="info">
            <div class="name">${name}</div>
            <div class="role">${role}</div>
          </div>
        `;

        div.addEventListener('click', () => {
          div.classList.toggle('present');
        });

        listEl.appendChild(div);
      });
    }

    const list = document.getElementById('teamList');
    renderTeam(list, TEAM);

    document.getElementById('shuffleBtn').addEventListener('click', () => {
      const selected = Array.from(document.querySelectorAll('.person.present'));
      if (selected.length === 0) return alert('Bitte mindestens eine Person auswählen.');
      const shuffled = selected.sort(() => Math.random() - 0.5);

      list.innerHTML = '';
      shuffled.forEach((el) => {
        const short = el.dataset.short || el.querySelector('.avatar').textContent;
        el.querySelector('.avatar').textContent = short;
        list.appendChild(el);
      });
    });

    document.getElementById('resetBtn').addEventListener('click', () => {
      renderTeam(list, TEAM);
    });
  </script>
</body>
</html>